# 코드 요약

## 목적
이 코드는 한국 주식 시장에서 특정 조건에 따라 포지션을 계산하고 할당하는 퀀트 모델을 구현합니다.

## 주요 전략 및 알고리즘
1. **데이터 수집 및 처리**:
   - `ContentFactory`를 사용하여 주식 가격 데이터(`price_close`)와 보너스 발행 데이터(`bonus_issue`)를 가져옵니다.
   - 보너스 발행 데이터를 정리하여 시작 날짜와 종료 날짜를 추출합니다.

2. **거래일 계산**:
   - 주어진 기간 내의 거래일 리스트를 생성합니다.
   - 특정 날짜에 가장 가까운 거래일을 찾는 함수를 정의합니다.

3. **포지션 계산**:
   - 보너스 발행 시작일과 종료일에 대한 플래그를 설정합니다.
   - 시작일과 종료일에 대한 플래그를 기반으로 포지션을 계산합니다.
   - `size_exposure` 데이터를 사용하여 포지션을 조정합니다.
   - 포지션을 0.02e8 단위로 할당하고, 총 할당량이 1e8을 초과할 경우 비율에 맞게 조정합니다.

4. **포지션 이동**:
   - 최종 포지션을 하루 뒤로 이동시키고, 결측값을 0으로 채웁니다.

## 데이터 소스
- `ContentFactory`를 통해 `price_close`, `bonus_issue`, `size_exposure` 데이터를 사용합니다.

## 요약
이 코드는 한국 주식 시장에서 보너스 발행 데이터를 기반으로 포지션을 계산하고 할당하는 퀀트 모델입니다. 거래일을 기준으로 포지션을 설정하고, 특정 지표(`size_exposure`)를 사용하여 포지션을 조정합니다. 최종적으로 포지션을 하루 뒤로 이동시켜 결측값을 처리합니다.